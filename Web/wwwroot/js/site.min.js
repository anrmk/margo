$.fn.disabled=function(){$(this).attr("disabled","disabled")};$.fn.enabled=function(){$(this).removeAttr("disabled")};class DocumentController{constructor(n,t=()=>{}){this.options=$.extend(!0,{table:"#table",filter:"#table-filter",controller:{api:"",mvc:""},columns:[],selected:window.selected},n);this.table=$(this.options.table);this.toolbar=$(this.table.data("toolbar"));this.filter=$(this.options.filter);this.datatable=this.table.DataTable({ajax:{url:this.options.controller.api,data:n=>$.extend({},n,this.filter.serializeJSON())},columns:this.options.columns,rowCallback:(n,t)=>{$.inArray(t.id,this.options.selected)!==-1&&$(n).addClass("active")}});this.initialize();this.callback=t}initialize(){var n=this.table.find("tbody");n.on("click","tr",n=>{var t=$(n.currentTarget);t.hasClass("active")?t.removeClass("active"):(this.table.find("tr.active").removeClass("active"),t.addClass("active"))});n.on("dblclick","tr",n=>{var t=this.datatable.row(n.currentTarget),i=t.data();location.href=`${this.options.controller.mvc}/Edit/${i.id}`});n.on("change","input",()=>{var n=this.table.find("input:checked");n.length>0?this.toolbar.find("button[data-action=delete]").enabled():this.toolbar.find("button[data-action=delete]").disabled()})}}$.fn.ajaxSubmit=function(n){this.on("submit",t=>{t.preventDefault();var i=$(t.currentTarget),r=i.find("fieldset"),u=$.extend({url:i.attr("action"),type:i.attr("method"),data:JSON.stringify(i.serializeJSON()),processData:!1,contentType:"application/json; charset=utf-8",complete:(t,i)=>{r.removeAttr("disabled"),n.callback(t,i)},callback:()=>{}},n);r.attr("disabled","disabled");$.ajax(u)})};$.fn.formatCurrency=function(n){return"$"+n.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")};$.fn.formatLink=function(n){return n==null?"":`<a href='${n}'target="_blank"><i class="fa fa-external-link-alt mr-1"></i>${n}</a>`};$.fn.formatDate=function(n){return n==null?"":new Date(n).toLocaleDateString()};$.fn.renderDatatableAction=function(n){return`<div class='ui fitted slider checkbox'><input type='checkbox' name='Id[]' value='${n}'> <label></label></div>`};$.fn.dialog=function(n){var r=$(this==null||this.length==0?"<p>Nothing to display<\/p>":this),t=$.extend({},{title:"Modal window",content:r},n),i;$(t.content).find("form");i=`<div class="ui modal"><i class="close icon"></i><div class="header">${t.title}</div>`+`<div class="content">${t.content.html()}</div>`+`<div class="actions"><div class="ui button deny">Cancel</div><div class="ui button approve">OK</div></div>`+`</div>`;$(i).modal({closable:!1,transition:"horizontal flip",onDeny:function(){return window.alert("Wait not yet!"),!1},onApprove:function(){var n=$(this).find("form");return n.length&&n.ajaxSubmit({},()=>{}),!1}}).modal("show")};$(document).ready(()=>{$(".masthead").visibility({once:!1,onBottomPassed:function(){$(".fixed.menu").transition("fade in")},onBottomPassedReverse:function(){$(".fixed.menu").transition("fade out")}}),$("form[data-submit=ajax]").ajaxSubmit({callback:(n,t)=>{t==="success"&&$(`<div>${n.responseText}</div>`).dialog()}})}).ajaxSend(()=>{}).ajaxStart(()=>{$("form fieldset").attr("disabled","disabled")}).ajaxStop(()=>{$("form fieldset").removeAttr("disabled")}).ajaxError((n,t)=>{window.console.log("Error",t.responseText)});$.extend(!0,$.fn.dataTable.defaults,{toolbar:"#toolbar",dom:`<'ui stackable grid'<'row'<'eight wide column'<'dt-toolbar'>><'right aligned four wide column'l><'right aligned four wide column'f>><'row dt-table'<'sixteen wide column'tr>><'row'<'seven wide column'i><'right aligned nine wide column'p>>>`,searching:!0,ordering:!1,processing:!0,serverSide:!0,searchDelay:1800,autoWidth:!1,mark:!0,language:{search:"_INPUT_",searchPlaceholder:"Search..."},fnInitComplete:function(){$($.fn.dataTable.defaults.toolbar).appendTo($("div.dt-toolbar"))}});$.extend($.serializeJSON.defaultOptions,{parseNumbers:!0,useIntKeysAsArrayIndex:!1,customTypes:{"string:nullable":function(n){return n||null},"number:nullable":function(n){return Number(n)||null}}});